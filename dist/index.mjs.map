{"version":3,"sources":["../src/StateExplorer.tsx","../src/StateExplorerModal.tsx","../index.ts"],"sourcesContent":["import { memo, useEffect, useRef, useState } from 'react';\r\nimport StateExplorerModal from './StateExplorerModal';\r\nimport './state.css';\r\n\r\nconst StateExplorer = ({ store, reducerName }) => {\r\n  const [isModalOpen, setIsModalOpen] = useState(false);\r\n  const modalRef = useRef();\r\n\r\n  useEffect(() => {\r\n    const handleKeyDown = e => {\r\n      if ((e.ctrlKey || e.metaKey) && e.key.toLowerCase() === 'p') {\r\n        e.preventDefault();\r\n        setIsModalOpen(true);\r\n      }\r\n    };\r\n\r\n    window.addEventListener('keydown', handleKeyDown);\r\n    return () => window.removeEventListener('keydown', handleKeyDown);\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    const handleClickOutside = event => {\r\n      if (\r\n        modalRef.current &&\r\n        !(modalRef.current as any).contains(event.target)\r\n      ) {\r\n        setIsModalOpen(false);\r\n      }\r\n    };\r\n\r\n    document.addEventListener('mousedown', handleClickOutside);\r\n    return () => document.removeEventListener('mousedown', handleClickOutside);\r\n  }, [setIsModalOpen]);\r\n\r\n  // return nothing if user is not on localhost\r\n  if (window.location.hostname !== 'localhost') {\r\n    return null;\r\n  }\r\n\r\n  return (\r\n    <StateExplorerModal\r\n      reducerName={reducerName}\r\n      store={store}\r\n      isOpen={isModalOpen}\r\n      onClose={() => setIsModalOpen(false)}\r\n    />\r\n  );\r\n};\r\n\r\nexport default memo(StateExplorer);\r\n","import { useEffect, useState, useRef, memo } from \"react\";\r\nimport ReactJson from \"react-json-view\";\r\nimport \"./state.css\";\r\n\r\nconst StateExplorerModal = ({ isOpen, onClose, store, reducerName }: { isOpen: boolean; onClose: () => void; store: any; mergeAllReducers?: boolean; reducerName?: string }) => {\r\n\tconst state = reducerName ? store.getState()[reducerName] : store.getState();\r\n\r\n\tconst [searchKey, setSearchKey] = useState(\"\");\r\n\tconst [debouncedSearchKey, setDebouncedSearchKey] = useState(searchKey);\r\n\tconst [filteredState, setFilteredState] = useState(state);\r\n\tconst modalRef = useRef<HTMLDivElement>(null);\r\n\r\n\tuseEffect(() => {\r\n\t\tconst handler = setTimeout(() => {\r\n\t\t\tsetDebouncedSearchKey(searchKey);\r\n\t\t}, 300); // debounce delay in ms\r\n\r\n\t\treturn () => clearTimeout(handler);\r\n\t}, [searchKey]);\r\n\r\n\tuseEffect(() => {\r\n\t\tconst handleClickOutside = (event: MouseEvent) => {\r\n\t\t\tif (modalRef.current && !modalRef.current.contains(event.target as Node)) {\r\n\t\t\t\tonClose();\r\n\t\t\t}\r\n\t\t};\r\n\t\tdocument.addEventListener(\"mousedown\", handleClickOutside);\r\n\t\treturn () => document.removeEventListener(\"mousedown\", handleClickOutside);\r\n\t}, [onClose]);\r\n\r\n\tconst filterByPath = (obj: any, search: string) => {\r\n\t\tconst result: any = {};\r\n\r\n\t\tconst recursiveFilter = (currentObj: any, currentPath = \"\", resultRef = result) => {\r\n\t\t\tfor (let key in currentObj) {\r\n\t\t\t\tconst fullPath = currentPath ? `${currentPath}.${key}` : key;\r\n\r\n\t\t\t\tif (fullPath.toLowerCase().startsWith(search.toLowerCase())) {\r\n\t\t\t\t\tresultRef[key] = currentObj[key];\r\n\t\t\t\t} else if (search.toLowerCase().startsWith(fullPath.toLowerCase())) {\r\n\t\t\t\t\tif (typeof currentObj[key] === \"object\" && currentObj[key] !== null) {\r\n\t\t\t\t\t\tresultRef[key] = {};\r\n\t\t\t\t\t\trecursiveFilter(currentObj[key], fullPath, resultRef[key]);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\trecursiveFilter(obj);\r\n\t\treturn result;\r\n\t};\r\n\r\n\tuseEffect(() => {\r\n\t\tif (debouncedSearchKey.trim() === \"\") {\r\n\t\t\tsetFilteredState(state);\r\n\t\t} else {\r\n\t\t\tconst filtered = filterByPath(state, debouncedSearchKey.trim());\r\n\t\t\tconst isEmpty = Object.keys(filtered).length === 0;\r\n\t\t\tsetFilteredState(isEmpty ? { error: `Path \"${debouncedSearchKey}\" not found` } : filtered);\r\n\t\t}\r\n\t}, [debouncedSearchKey, state]);\r\n\r\n\tif (!isOpen) return null;\r\n\r\n\treturn (\r\n\t\t<div className=\"state-explorer-backdrop\">\r\n\t\t\t<div ref={modalRef} className=\"state-explorer-container\">\r\n\t\t\t\t<div className=\"state-explorer-header\">\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t<h2 className=\"state-explorer-title\">State Explorer</h2>\r\n\t\t\t\t\t\t<p className=\"state-explorer-subtitle\">Powered by AJ</p>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<button onClick={onClose} className=\"state-explorer-close\" aria-label=\"Close\">\r\n\t\t\t\t\t\t√ó\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</div>\r\n\t\t\t\t<input type=\"text\" placeholder=\"Search path (e.g., user.name)\" className=\"state-explorer-search\" value={searchKey} onChange={(e) => setSearchKey(e.target.value)} autoFocus />\r\n\t\t\t\t<div className=\"state-explorer-json\">\r\n\t\t\t\t\t<ReactJson src={filteredState} collapsed={2} />\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default memo(StateExplorerModal);\r\n","import StateExplorer from './src/StateExplorer';\r\n\r\nexport default StateExplorer;\r\n"],"mappings":"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","names":["memo","useEffect","useRef","useState","jsx","useState","useRef","useEffect","memo"]}