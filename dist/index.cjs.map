{"version":3,"sources":["../index.js","../src/StateExplorer.jsx","../src/StateExplorerModal.jsx"],"sourcesContent":["import StateExplorer from './src/StateExplorer';\r\nimport './src/index.css';\r\n\r\nexport default StateExplorer;\r\n","import { memo, useEffect, useRef, useState } from 'react';\r\nimport StateExplorerModal from './StateExplorerModal';\r\nimport './index.css';\r\n\r\nconst StateExplorer = ({ store, reducerName }) => {\r\n  console.log('useState', useState);\r\n  const [isModalOpen, setIsModalOpen] = useState(false);\r\n  const modalRef = useRef(null);\r\n\r\n  useEffect(() => {\r\n    const handleKeyDown = e => {\r\n      if ((e.ctrlKey || e.metaKey) && e.key.toLowerCase() === 'p') {\r\n        e.preventDefault();\r\n        setIsModalOpen(true);\r\n      }\r\n    };\r\n\r\n    window.addEventListener('keydown', handleKeyDown);\r\n    return () => window.removeEventListener('keydown', handleKeyDown);\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    const handleClickOutside = event => {\r\n      if (modalRef.current && !modalRef.current.contains(event.target)) {\r\n        setIsModalOpen(false);\r\n      }\r\n    };\r\n\r\n    document.addEventListener('mousedown', handleClickOutside);\r\n    return () => document.removeEventListener('mousedown', handleClickOutside);\r\n  }, [setIsModalOpen]);\r\n\r\n  // return nothing if user is not on localhost\r\n  if (window.location.hostname !== 'localhost') {\r\n    return null;\r\n  }\r\n\r\n  return (\r\n    <StateExplorerModal\r\n      reducerName={reducerName}\r\n      store={store}\r\n      isOpen={isModalOpen}\r\n      onClose={() => setIsModalOpen(false)}\r\n    />\r\n  );\r\n};\r\n\r\nexport default memo(StateExplorer);\r\n","import { useEffect, useState, useRef, memo } from 'react';\r\nimport ReactJson from 'react-json-view';\r\nimport './index.css';\r\n\r\nconst StateExplorerModal = ({ isOpen, onClose, store, reducerName }) => {\r\n  const state = reducerName ? store.getState()[reducerName] : store.getState();\r\n\r\n  const [searchKey, setSearchKey] = useState('');\r\n  const [debouncedSearchKey, setDebouncedSearchKey] = useState(searchKey);\r\n  const [filteredState, setFilteredState] = useState(state);\r\n  const modalRef = useRef < HTMLDivElement > null;\r\n\r\n  useEffect(() => {\r\n    const handler = setTimeout(() => {\r\n      setDebouncedSearchKey(searchKey);\r\n    }, 300); // debounce delay in ms\r\n\r\n    return () => clearTimeout(handler);\r\n  }, [searchKey]);\r\n\r\n  useEffect(() => {\r\n    const handleClickOutside = event => {\r\n      if (modalRef.current && !modalRef.current.contains(event.target)) {\r\n        onClose();\r\n      }\r\n    };\r\n    document.addEventListener('mousedown', handleClickOutside);\r\n    return () => document.removeEventListener('mousedown', handleClickOutside);\r\n  }, [onClose]);\r\n\r\n  const filterByPath = (obj, search) => {\r\n    const result = {};\r\n\r\n    const recursiveFilter = (\r\n      currentObj,\r\n      currentPath = '',\r\n      resultRef = result\r\n    ) => {\r\n      for (let key in currentObj) {\r\n        const fullPath = currentPath ? `${currentPath}.${key}` : key;\r\n\r\n        if (fullPath.toLowerCase().startsWith(search.toLowerCase())) {\r\n          resultRef[key] = currentObj[key];\r\n        } else if (search.toLowerCase().startsWith(fullPath.toLowerCase())) {\r\n          if (typeof currentObj[key] === 'object' && currentObj[key] !== null) {\r\n            resultRef[key] = {};\r\n            recursiveFilter(currentObj[key], fullPath, resultRef[key]);\r\n          }\r\n        }\r\n      }\r\n    };\r\n\r\n    recursiveFilter(obj);\r\n    return result;\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (debouncedSearchKey.trim() === '') {\r\n      setFilteredState(state);\r\n    } else {\r\n      const filtered = filterByPath(state, debouncedSearchKey.trim());\r\n      const isEmpty = Object.keys(filtered).length === 0;\r\n      setFilteredState(\r\n        isEmpty ? { error: `Path \"${debouncedSearchKey}\" not found` } : filtered\r\n      );\r\n    }\r\n  }, [debouncedSearchKey, state]);\r\n\r\n  if (!isOpen) return null;\r\n\r\n  return (\r\n    <div className='state-explorer-backdrop'>\r\n      <div ref={modalRef} className='state-explorer-container'>\r\n        <div className='state-explorer-header'>\r\n          <div>\r\n            <h2 className='state-explorer-title'>State Explorer</h2>\r\n            <p className='state-explorer-subtitle'>Powered by AJ3</p>\r\n          </div>\r\n          <button\r\n            onClick={onClose}\r\n            className='state-explorer-close'\r\n            aria-label='Close'>\r\n            Ã—\r\n          </button>\r\n        </div>\r\n        <input\r\n          type='text'\r\n          placeholder='Search path (e.g., user.name)'\r\n          className='state-explorer-search'\r\n          value={searchKey}\r\n          onChange={e => setSearchKey(e.target.value)}\r\n          autoFocus\r\n        />\r\n        <div className='state-explorer-json'>\r\n          <ReactJson src={filteredState} collapsed={2} />\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default memo(StateExplorerModal);\r\n"],"mappings":"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","names":["import_react","ReactJson","import_index","import_jsx_runtime"]}